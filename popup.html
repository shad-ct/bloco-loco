<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Blocker</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="apiKeyScreen" class="hidden">
    <h2>Welcome</h2>
    <p>Please enter your Gemini API Key to start.</p>
    <input type="password" id="apiKeyInput" placeholder="Paste API Key here">
    <button id="saveApiKeyBtn">Save API Key</button>
    <p><small><a href="https://aistudio.google.com/app/apikey" target="_blank">Get API Key</a></small></p>
  </div>

  <div id="mainApp" class="hidden">
    <header>
      <div class="tabs">
        <button class="tab-btn active" data-tab="history">History</button>
        <button class="tab-btn" data-tab="block">Block</button>
        <button class="tab-btn" data-tab="block-site">Block Site</button>
      </div>
    </header>

    <main>
      <!-- History Tab -->
      <div id="history" class="tab-content active">
        <div class="controls">
          <select id="categoryFilter">
            <option value="all">All Categories</option>
          </select>
          <button id="refreshHistoryBtn" title="Refresh">ðŸ”„</button>
        </div>
        <button id="categorizeBtn" class="full-width">Categorize Last 7 Days</button>
        <div id="historyList" class="list-container">
          <div class="empty-state">No history categorized yet.</div>
        </div>
      </div>

      <!-- Block Tab -->
      <div id="block" class="tab-content">
        
        <div class="section">
          <h3>Block by Category</h3>
          <div id="categoryBlockList" class="toggle-list">
            <!-- Categories with toggles -->
          </div>
        </div>

        <div class="section">
          <h3>Block Specific Titles</h3>
          <div class="input-group">
            <input type="text" id="blockTitleInput" placeholder="Enter title keyword (e.g. 'YouTube')">
            <button id="addBlockTitleBtn">Add</button>
          </div>
          <ul id="blockedTitlesList" class="simple-list">
            <!-- Blocked titles -->
          </ul>
        </div>

      </div>

      <!-- Block Site Tab -->
      <div id="block-site" class="tab-content">
        <div class="section">
          <h3>Current Site</h3>
          <div id="currentSiteInfo">
            <p><strong>Domain:</strong> <span id="currentDomain">...</span></p>
            <button id="blockCurrentSiteBtn" class="full-width" style="background: #dc3545;">Block This Site</button>
          </div>
        </div>

        <div class="section">
          <h3>Blocked Sites</h3>
          <div class="input-group">
            <input type="text" id="blockSiteInput" placeholder="Enter domain (e.g. youtube.com)">
            <button id="addBlockSiteBtn">Add</button>
          </div>
          <ul id="blockedSitesList" class="simple-list">
            <!-- Blocked sites -->
          </ul>
        </div>
      </div>
    </main>

    <footer>
      <a href="#" id="changeApiKey">Change API Key</a>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>